---
import type { ThemeConfig } from '@/types'
import GoogleAnalytics from './analytics/GoogleAnalytics.astro'
import BaiduAnalytics from './analytics/BaiduAnalytics.astro'

interface Props {
  config: ThemeConfig['analytics']
}

const { config } = Astro.props

const googleAnalyticsId = config?.google?.id
const baiduAnalyticsId = config?.baidu?.id
---

{
  googleAnalyticsId && (
    <GoogleAnalytics id={googleAnalyticsId} />
  )
}

{
  baiduAnalyticsId && (
    <BaiduAnalytics id={baiduAnalyticsId} />
  )
}

<script define:vars={{ googleAnalyticsId }}>
  window.dataLayer = window.dataLayer || [];
  window.googleAnalyticsId = googleAnalyticsId;
</script>
